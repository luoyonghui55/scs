<!DOCTYPE html>
<html lang="en">
<head>
<title>用户注册</title>
<meta charset="utf-8">
<link rel="shortcut icon" href="static/images/userIndex/favicon.ico" />
<link type="text/css" rel="stylesheet" href="static/css/userIndex/common.css">
<link type="text/css" rel="stylesheet" href="static/css/userIndex/userRegister.css">
<style type="text/css">
.error-msg{font-weight: bolder;color: red;}
</style>
<script type="text/javascript" src="static/js/plugins/jquery/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="static/js/common/constant.js"></script>
<script type="text/javascript" src="static/js/plugins/encryption/scs_sha1.js"></script>
<script type="text/javascript" src="static/js/common/commonUtil.js"></script>
<script type="text/javascript" src="static/js/common/arrows.js"></script>
<script type="text/javascript" src="static/js/common/CheckUtil.js"></script>
</head>
<body>
<!--header-->
<header id="pageHeader">
    <div class="row-top">
        <div class="main">
            <div class="wrapper top-logo">
                <a href="/scs">LGL</a>
            </div>
        </div>
    </div>
    <div class="menu-row">
        <div class="menu-bg">
            <div class="main">
                <nav class="indent-left">
                    <ul class="menu wrapper">
                        <li><a href="/scs">热门服务</a></li>
                        <li><a href="issueService.html">发布服务</a></li>
                        <li id="Myself">
                            <a href="userRegister.html" class="user-register">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注册</a>
                            <a href="userLogin.html" class="user-login">登录&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
                        </li>
                        <li><a href="joinUs.html">JOIN US</a></li>
                        <li><a href="commonProblems.html">常见问题</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</header>
<!-- 用户注册 -->
<div id="middleMain" class="middle-main">
    <div class="container">
        <div style="width:384px; box-sizing:border-box; float: left;"><!--width:50%;-->
            <div class="funnyNewsTicker" id="funnyNewsTicker2">
                <ul>
                    <!-- <li>
                        <div class="fnt-content"><img src="static/images/userIndex/1.jpg" style=""></div>
                    </li>
                    <li>
                        <div class="fnt-content"><img src="static/images/userIndex/2.jpg" style=""></div>
                    </li>
                    <li>
                        <div class="fnt-content"><img src="static/images/userIndex/3.jpg" style=""></div>
                    </li>
                    <li>
                        <div class="fnt-content"><img src="static/images/userIndex/4.jpg" style=""></div>
                    </li>
                    <li>
                        <div class="fnt-content"><img src="static/images/userIndex/5.jpg" style=""></div>
                    </li>
                    <li>
                        <div class="fnt-content"><img src="static/images/userIndex/6.jpg" style=""></div>
                    </li>
                    <li>
                        <div class="fnt-content"><img src="static/images/userIndex/7.jpg" style=""></div>
                    </li>
                    <li>
                        <div class="fnt-content"><img src="static/images/userIndex/8.jpg" style=""></div>
                    </li>
                    <li>
                        <div class="fnt-content"><img src="static/images/userIndex/9.jpg" style=""></div>
                    </li>
                    <li>
                        <div class="fnt-content"><img src="static/images/userIndex/10.jpg" style=""></div>
                    </li> -->
                </ul>
            </div>
        </div>
        <!-- <form id="orderForm" class="register-form"> -->
        <div id="orderForm" class="register-form"> 
            <fieldset><br>
                <span class="register-title">填写用户注册信息</span>
                <ol>
                    <li>
                        <label>手机号码：</label>
                        <input id="myPhone" class="phone-number" type="tel" placeholder="请输入手机号码" required>
                        <!--<button>免费获取验证码</button>-->
                        <input type="button" id="getCheckCode" class="btn-check-code" value="获取验证码">
                        <div id="phoneErrorMsg" class="error-msg"></div>
                    </li>
                    <li>
                        <label>验&nbsp;&nbsp;证&nbsp;&nbsp;码：</label>
                        <input id="checkCode" type="text" placeholder="请输入验证码" required>
                        <div id="checkCodeErrorMsg" class="error-msg"></div>
                    </li>
                    <li>
                        <label>登录密码：</label>
                        <input id="userPassword" type="password" placeholder="请输入密码" required>
                        <div id="passwordErrorMsg" class="error-msg"></div>
                    </li>
                    <li>
                        <label>确认密码：</label>
                        <input id="userConfirmPassword" type="password" placeholder="请再输入一次密码" required>
                        <div id="confirmPasswordErrorMsg" class="error-msg"></div>
                    </li>
                </ol>
            </fieldset>

            <fieldset>
            	<button class="btn-now-register" id="btnRegister">立即注册</button>
            	<input type="checkbox" onclick="userRegisterAgreement(this)" style="margin-top: 14px;" checked>
                <a style="text-decoration: underline;line-height:38px;" href="userRegisterAgreement.html">用户注册协议</a>
            </fieldset>
           </div>
        <!-- </form>  -->
    </div>
</div>

<!-- 页面尾部 -->
<div id="footer" class="footer">
    <div class="footer_info">
        <div class="footer-care-us" style="margin-left: 0px;">
            <strong>关注微信</strong><br/>
            <!--微信扫一扫<br />-->
            <img src="static/images/userIndex/weChat.png" />
        </div>
        <div class="footer-about-us">
            <strong>关于九九</strong><br/>
            <a href="aboutUs.html">关于我们</a><br/>
            <a href="serviceAim.html">服务宗旨</a><br/>
            <a href="feedback.html">意见反馈</a>
        </div>
        <div class="footer-contact-us">
            <strong>联系我们</strong><br/>
            <span>
                客服电话：186-7078-7994<br />
                服务邮箱：ijobvip@163.com<br />
                公司地址：北京丰台区草桥东路
            </span>
        </div>
        <div class="footer-record" style="float: right;">
            京ICP备25697805号-4  京ICP证182661号  Copyright © 2015-2016
        </div>
    </div>
</div>
</body>
</html>
<script type="text/javascript">
$(function () {
    $('#getCheckCode').click(function () {
		var phone = $('#myPhone').val();
      	if(phoneNumberIsRight(phone)){
      		var time = 60;//60秒倒计时
      		var phoneObj = this;
      		phoneObj.disabled = true;
      		var checkCodeInterval = window.setInterval(function () {
      			time --;
      			if (time < 1) {
      				window.clearInterval(checkCodeInterval);
      				$('#getCheckCode').val('获取验证码');
      				$('#phoneErrorMsg').text('');
      				phoneObj.disabled = false;
				}else {
					$('#getCheckCode').val(time + '秒后可点击');
				}
			},1000);
      		//获取验证码
      		goGetCheckCode();
      	}else{
      		$('#phoneErrorMsg').text('请输入正确的手机号码');
      	}
    });
    $('#btnRegister').click(function(){
    	setButtonStatus(this, 5000);
    	userRegister();
    });
});

//获取验证码
function goGetCheckCode() {
    $.ajax({
        type: "POST",
        url: SCS_INDEX_URL + 'userIndex/user/sendPhoneCheckCode',
        data:{PHONE: $('#myPhone').val()},
        dataType: 'json',
        async: false,
        success: function(result) {
        	if(result.state=='1'){
        		$('#phoneErrorMsg').text('验证码已发送');
        	}else if(result.state=='2'){
        		$('#phoneErrorMsg').text('该号码已注册');
        	}else if(result.state=='3'){
        		$('#phoneErrorMsg').text('当前系统繁忙,请稍后再获取验证码');
        	}else if(result.state=='4'){
        		$('#phoneErrorMsg').text('您当前IP地址获取验证码次数过多，请稍候再试');
        	}else if(result.state=='5'){
        		$('#phoneErrorMsg').text('您当前手机号码获取验证码次数过多，请稍候再试');
        	}else if(result.state=='6'){
        		$('#phoneErrorMsg').text('您输入的手机号码格式不对，请重新输入');
        	}else {
        		$('#phoneErrorMsg').text('当前系统繁忙,请稍后再获取验证码');
			}
        },
        error: function() {
        	$('#phoneErrorMsg').text('当前系统繁忙,请稍后再获取验证码');
		}
    });
}

function userRegister(){
	var mobileNumber = V('myPhone');
	if(!phoneNumberIsRight(mobileNumber)){
		$('#phoneErrorMsg').text('请输入正确手机号码');
		return;
	}else if(!inputIsEmpty('checkCode') || V('checkCode').length != 6){
		$('#checkCodeErrorMsg').text('请输入正确的验证码');
		return;
	}else if(!inputIsEmpty('userPassword') || V('userPassword').length < 6){
		$('#passwordErrorMsg').text('请至少输入6位密码');
		return;
	}else if(!inputIsEmpty('userConfirmPassword')){
		$('#confirmPasswordErrorMsg').text('确认密码不能为空');
		return;
	}
	var userPassword = V('userPassword');
	var userConfirmPassword = V('userConfirmPassword');
	if(userPassword != userConfirmPassword){
		$('#confirmPasswordErrorMsg').append('密码确认密码不一致');
		return;
	}
	var checkCode = I('checkCode').value;
	var shaObj = new jsSHA("SHA-1", "TEXT");
	shaObj.update(userPassword);
	var hashPassword = shaObj.getHash("HEX");
	$.ajax({
        type: "POST",
        url: SCS_INDEX_URL + '/userIndex/user/IamRegister',
        data:{phone: mobileNumber, password: hashPassword, sendMsg: checkCode},
        dataType: 'json',
        async: false,
        success: function(result) {
        	if (result.state == '1') {
        		alert('恭喜您注册成功');
        		sessionStorage.setItem(SCS_USER_NAME, mobileNumber);
        		window.location.href = SCS_INDEX_URL;
			}else if (result.state == '2') {
				alert('该手机号码已被注册');
			}else if (result.state == '3') {
				alert('验证码不正确');
			}else if (result.state == '4') {
				alert('获取手机号码失败');
			}else {
				alert('注册失败');
			}
        },
        error: function () {
        	alert('系统繁忙，请稍候再试');
		}
	});
}
$(document).ready(function(){
    $("#funnyNewsTicker2").funnyNewsTicker({width:"80%",timer:1000,titlecolor:"#FFF",itembgcolor:"#1faf6d",infobgcolor:"#1a935c",buttonstyle:"white",bordercolor:"#1a935c"});
});
function userRegisterAgreement(ckUserRegisterAgreement){
    if (ckUserRegisterAgreement.checked){
        $('.btn-now-register').css('background','url(../static/images/userIndex/menu-spacer.gif) repeat-x');
        $(".btn-now-register").attr("disabled", false);
    }else {
        $('.btn-now-register').css('background',' #999988');
        $(".btn-now-register").attr("disabled", true);
    }
}
</script>
<script type="text/javascript" src="static/js/common/commonPage.js"></script>
<script type="text/javascript" src="static/js/common/commonHeaderPage.js"></script>